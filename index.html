<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Canvas Spritter</title>
</head>
<style>
    canvas {
        border: 1px solid black;
    }
</style>
<body>
    <h3>Canvas Spritter</h3>
    <hr>
    <canvas id='canvas' width='480' height='360'></canvas>
    <p id='status'>Hi!</p>

    <script src='src/engine_consts.js'></script>
    <script src='src/vec2.js'></script>
    <script src='spritter.js'></script>

    <script>

    function writeStatus(text)
    {
        document.getElementById('status').textContent = text;
    }

    let canvas = document.getElementById('canvas');
    let spritter = null;

    async function main()
    {
        if (!navigator.gpu)
            throw "WebGPU not supported";

        const adapter = await navigator.gpu.requestAdapter();
        if (!adapter)
            throw "Couldn't get adapter";

        const device = await adapter.requestDevice();

        console.log('device success');

        spritter = new Spritter(canvas, device);
        await spritter.init();

        setInterval(() => {
            spritter.draw();   
        }, 1000 / 60)
    }

    main();

    </script>

</body>
</html>